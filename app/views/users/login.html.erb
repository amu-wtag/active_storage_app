<div class="center">
    <h1>Login</h1>
    <%= form_with url: users_attempt_login_path, method: :post, local: true, class: "form-horizontal" do |f| %>
        <div class="mb-3">
            <%= f.label :email, "Email" %>
            <%= f.email_field :email, value: params[:email], class: "form-control" %>
        </div>

        <div class="mb-3">
            <%= f.label :password, "Password" %>
            <%= f.password_field :password, value: params[:password], class: "form-control", id: "password_field" %>
            <i class="bi bi-eye-slash" id="togglePassword"></i>
            <!-- <%= check_box_tag "show_password", "1", false, id: "show_password" %>
            <%= label_tag "show_password", "Show Password" %> -->
        </div>

        <div class="mb-3">
            <div class="d-grid gap-2">
                <%= f.submit "Login", class: "btn btn-primary" %>
            </div>
        </div>
    <% end %>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const showPasswordCheckbox = document.getElementById('show_password');
        const passwordField = document.getElementById('password_field');

        showPasswordCheckbox.addEventListener('change', function() {
            // Toggle the type of the password field
            passwordField.type = this.checked ? 'text' : 'password';
        });
    });

    const togglePassword = document.querySelector("#togglePassword");
    const password = document.querySelector("#password_field");
    togglePassword.addEventListener("click", (e) => {
        const type = password.getAttribute("type") === "password" ? "text" : "password";
        password.setAttribute("type", type);
        e.target.classList.toggle("bi-eye");
    });
</script>
